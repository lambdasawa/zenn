---
title: "JSON ã‚’è¦‹ã‚‹éš›ã®ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰ jless ã®ç´¹ä»‹"
emoji: "ğŸŒ™" # jless ã®ãƒã‚¹ã‚³ãƒƒãƒˆã‚­ãƒ£ãƒ©ãŒã‚¯ãƒ©ã‚²(æµ·æœˆ)ãªã®ã§
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["json", "cli", "jq"]
published: true
---

JSON ã‚’è¦‹ã‚‹éš›ã®ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰ `jless` ã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚
ä¸€è¨€ã§ç´¹ä»‹ã™ã‚‹ã¨ JSON ã«ç‰¹åŒ–ã—ãŸ `less` ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚

å…¬å¼ã‚µã‚¤ãƒˆã®ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚

- [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•](https://github.com/PaulJuliusMartinez/jless#installation)
- [ãƒ¦ãƒ¼ã‚¶ã‚¬ã‚¤ãƒ‰](https://jless.io/user-guide.html)

## ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ

![less and jless](https://storage.googleapis.com/zenn-user-upload/e3594da83c76-20220723.png)

ã“ã¡ã‚‰ãŒ [OpenAPI ã‚¹ã‚­ãƒ¼ãƒã® example ã¨ã—ã¦ã‚ˆãä½¿ã‚ã‚Œã‚‹ JSON](https://github.com/OAI/OpenAPI-Specification/blob/main/examples/v3.0/petstore.json) ã‚’ `less` (å·¦) ã¨ `jless` (å³) ã«ãƒ‘ã‚¤ãƒ—ã§æ¸¡ã—ãŸéš›ã®ç”»åƒã§ã™ã€‚

å³ã¯ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œã¦ãŠã‚Šè¦–èªæ€§ãŒé«˜ã„ã§ã™ã€‚

## JSON ã®æ§‹é€ ã‚’æ„è­˜ã—ãŸã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•

```txt
  "info": {
    "version": "1.0.0",
    "title": "Swagger Petstore",
    "license": {
      "name": "MIT"    <-- â‘ 
    }    <-- â‘¡
  },
  "servers": [    <-- â‘¢
    {
      "url": "http://petstore.swagger.io/v1"
    }
  ],
```

â‘  ã®è¡Œã«ã‚«ãƒ¼ã‚½ãƒ«ãŒã‚ãŸã£ã¦ã„ã‚‹çŠ¶æ…‹ã§ `â†“` ã‚­ãƒ¼ã‚’ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ã€ä¸€èˆ¬çš„ãªãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãªã©ã§ã¯ â‘¡ ã®ä½ç½®ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒç§»å‹•ã—ã¾ã™ã€‚
ã“ã®æ“ä½œã‚’ã—ãŸå ´åˆ `jless` ã§ã¯ â‘¢ ã®ä½ç½®ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒç§»å‹•ã—ã¾ã™ã€‚

â‘¡ ã®ä½ç½®ã«ç§»å‹•ã—ãŸã„ç†ç”±ã¯ã»ã¨ã‚“ã©ãªã„ã®ã§ã€ `jless` ã®æ–¹ãŒç°¡æ½”ã«æ“ä½œã§ãã‚‹ã¨è¨€ãˆã¾ã™ã€‚

`â†‘`, `â†“` ã®ã‚­ãƒ¼ã®ä»£ã‚ã‚Šã« `j`, `k` ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

## ç•³ã¿è¾¼ã¿

ã‚ã‚‹è¦ç´ ã‚’æ¢ã—ã¦ã„ã‚‹ã¨ãã«ã€ä»–ã®èˆˆå‘³ã®ãªã„è¦ç´ ãŒãƒã‚¤ã‚ºã«ãªã‚‰ãªã„ã‚ˆã†ã«éš ã—ãŸã„ã‚·ãƒ¼ãƒ³ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ä¾‹ãˆã° VSCode ã§ã¯è¡Œç•ªå·ã®ã‚ãŸã‚Šã« `â–¼` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã“ã‚Œã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç•³ã¿è¾¼ã¿ã‚’ã—ãŸã‚Šå±•é–‹ã—ãŸã‚Šã§ãã¾ã™ã€‚

`jless` ã®å ´åˆã¯ `â†` or `h` ã‚­ãƒ¼ã§ç•³ã¿è¾¼ã¿ã€ `â†’` or `l` ã‚­ãƒ¼ã§å±•é–‹ã§ãã¾ã™ã€‚
ã‚¿ã‚¤ãƒ—ã—ã‚„ã™ã„ã‚­ãƒ¼ã«é »ç¹ã«ä½¿ã†æ“ä½œãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã®ã¯ä¾¿åˆ©ã§ã™ã€‚

## æ¤œç´¢

`less` ã¨åŒæ§˜ã« `/` ã‚­ãƒ¼ã§æ¤œç´¢ã‚’è¡Œãˆã¾ã™ã€‚

## è¦ç´ ã®ã‚³ãƒ”ãƒš

ä»¥ä¸‹ã®ã‚ˆã†ãª JSON ã‚’ `jless` ã§é–‹ã„ã¦ãŠã‚Š â‘  ã®éƒ¨åˆ†ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒã‚ãŸã£ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚

```txt
  "components": {
    "schemas": {
      "Pet": {    <-- â‘ 
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "name": {
            "type": "string"
          },
          "tag": {
            "type": "string"
          }
        }
      },
```

ã“ã®ã¨ã JSON ã®ã‚­ãƒ¼ã‚„å€¤ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ä¾¿åˆ©ãªã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚

`yy` ã¨ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚ŒãŸ JSON ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚

ä¾‹:

```json
{
  "type": "object",
  "required": [
    "id",
    "name"
  ],
  "properties": {
    "id": {
      "type": "integer",
      "format": "int64"
    },
    "name": {
      "type": "string"
    },
    "tag": {
      "type": "string"
    }
  }
}
```

`yv` ã¨ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãªã—ã® JSON ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚

ä¾‹:

```json
{ "type": "object", "required": ["id", "name"], "properties": { "id": { "type": "integer", "format": "int64" }, "name": { "type": "string" }, "tag": { "type": "string" } } }
```

`yk` ã¨ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ JSON ã®ã‚­ãƒ¼ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚

ä¾‹:

```txt
Pet
```

`yp` ã¨ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ãã®è¦ç´ ã¸ã®ãƒ‘ã‚¹ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ä¸€èˆ¬çš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ä½¿ãˆã‚‹ã‚ˆã†ãªè¨˜æ³•ã§ã™ã€‚

```txt
.components.schemas.Pet
```

`yb` ã¨ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ãã®è¦ç´ ã¸ã®ãƒ‘ã‚¹ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ä¸€èˆ¬çš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã®ãƒãƒƒãƒ—ã€ãƒãƒƒã‚·ãƒ¥ã€é€£æƒ³é…åˆ—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã©ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ä½¿ãˆã‚‹ã‚ˆã†ãªè¨˜æ³•ã§ã™ã€‚

```txt
["components"]["schemas"]["Pet"]
```

`yq` ã¨ã‚¿ã‚¤ãƒ—ã™ã‚‹ã¨ãã®è¦ç´ ã¸ã®ãƒ‘ã‚¹ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ `jq` ã§ä½¿ãˆã‚‹è¨˜æ³•ã§ã™ã€‚

```txt
.components.schemas.Pet
```

ã“ã®ä¾‹ã§ã¯ `yp` ã¨ `yq` ã®çµæœãŒå…¨ãåŒã˜ã§ã™ãŒã€é…åˆ—å†…ã«ã‚ã‚‹è¦ç´ ã‚’ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸçŠ¶æ…‹ã§ã‚¿ã‚¤ãƒ—ã—ãŸéš›ã®æŒ™å‹•ãŒç•°ãªã‚Šã¾ã™ã€‚
`yp` ã®å ´åˆã¯ `.[1]` ãªã©æ·»å­—ãŒæ˜ç¤ºã•ã‚Œã¾ã™ãŒã€ `yq` ã®å ´åˆã¯ `.[]` ã¨ãªã£ã¦å…¨è¦ç´ ã®å–å¾—ã‚’æ„å‘³ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã‚Šã¾ã™ã€‚

## YAML å¯¾å¿œ

ãƒ‘ã‚¤ãƒ—ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’æµã™å ´åˆã¯ `--yaml` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ YAML ã‚‚åŒæ§˜ã«å‡¦ç†ã§ãã¾ã™ã€‚

ãƒ‘ã‚¤ãƒ—ã§ã¯ãªã `jless` ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã§ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã™ã‚‹ã¨ãã¯æ‹¡å¼µå­ã‹ã‚‰ JSON or YAML ãŒæ¨æ¸¬ã•ã‚Œã¾ã™ã€‚
